@model List<CourseVM>
@{
    var brojac = 0;
    Layout = null;

}

<div>
    <div class="form-group">
        <select name="state" id="maxRows" class="from-control" style="width:150px;">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
        </select>
    </div>
    <table id="corsesTable" class="table table-striped table-bordered table-sm" cellspacing="0" width="90%">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Naziv kursa</th>
                <th scope="col">Početak</th>
                <th scope="col">Kraj</th>
                <th scope="col">Bilješka</th>
                <th scope="col">CS</th>

            </tr>
        </thead>
        <tbody>
            @foreach (CourseVM x in Model)
            {
                @if (x.CourseName != null)
                {
            <tr>
                <th scope="row"> @(++brojac)  </th>
                <td>  @x.CourseName </td>
                <td>  @x.Start </td>
                <td>  @x.End </td>
                <td>  @x.Notes </td>
                <td>  @x.CourseSectionID </td>
            </tr>
                }
            }
        </tbody>
    </table>

    <nav>
        <ul class="pagination">
            @*<li class="page-item">
                    <a class="page-link" href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                        <span class="sr-only">Previous</span>
                    </a>
                </li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                        <span class="sr-only">Next</span>
                    </a>
                </li>*@
        </ul>
    </nav>
</div>


   
    <script type="text/javascript">

         @*$(document).ready(function () {
                    var jsArray = @Html.Raw(Json.Serialize(Model));
                    console.log(jsArray);
         })*@

        $(document).ready(function () {
              $('.pagination').html('');
            var trnum = 0;
            var maxRows = parseInt($('#maxRows').val());
            var totalRows = $('#corsesTable tbody tr').length;
            $('#corsesTable tr:gt(0)').each(function () {
                trnum++;
                if (trnum > maxRows) {
                    $(this).hide();
                }
                if (trnum <= maxRows) {
                    $(this).show();
                }
            })
            if (totalRows > maxRows) {
                var pagenum = Math.ceil(totalRows / maxRows);
                for (var i = 1; i <= pagenum;) {
                    $('.pagination').append('<li class="page-item" data-page="'+i+'">\<span class="page-link" >'+ i++ +'<span class="sr-only">(current)</span></span>\</li>').show()
                }
            }
            $('.pagination li:first-child').addClass('active');
            $('.pagination li').on('click', function () {
                var pageNum = $(this).attr('data-page');
                var trIndex = 0;
                $('.pagination li').removeClass('active');
                $(this).addClass('active')
                $('#corsesTable tr:gt(0)').each(function () {
                    trIndex++;
                    if (trIndex > (maxRows * pageNum) || trIndex <= ((maxRows * pageNum) - maxRows)) {
                        $(this).hide();
                    } else {
                        $(this).show();
                    }
                })
            })
        })

        $('#maxRows').on('change', function () {
            $('.pagination').html('');
            var trnum = 0;
            var maxRows = parseInt($(this).val());
            var totalRows = $('#corsesTable tbody tr').length;
            $('#corsesTable tr:gt(0)').each(function () {
                trnum++;
                if (trnum > maxRows) {
                    $(this).hide();
                }
                if (trnum <= maxRows) {
                    $(this).show();
                }
            })
            if (totalRows > maxRows) {
                var pagenum = Math.ceil(totalRows / maxRows);
                for (var i = 1; i <= pagenum;) {
                    $('.pagination').append('<li class="page-item" data-page="'+i+'">\<span class="page-link" >'+ i++ +'<span class="sr-only">(current)</span></span>\</li>').show()
                }
            }
            $('.pagination li:first-child').addClass('active');
            $('.pagination li').on('click', function () {
                var pageNum = $(this).attr('data-page');
                var trIndex = 0;
                $('.pagination li').removeClass('active');
                $(this).addClass('active')
                $('#corsesTable tr:gt(0)').each(function () {
                    trIndex++;
                    if (trIndex > (maxRows * pageNum) || trIndex <= ((maxRows * pageNum) - maxRows)) {
                        $(this).hide();
                    } else {
                        $(this).show();
                    }
                })
            })
        })
      
    </script>
